<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" data-bs-theme="dark" lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Application</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
</head>
<body style="background-color: slate-gray">

<div class="container my-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h1>Application Details</h1>
        <div>
            <a th:href="@{ / }" class="btn btn-outline-light me-2">Back</a>
            <a th:href="@{/edit/{id}(id=${jobApplication.id})}" class="btn btn-primary me-2">Edit</a>
            <a th:href="@{/delete/{id}(id=${jobApplication.id})}" class="btn btn-danger"
               onclick="return confirm('Are you sure you want to delete this entry?')">Delete</a>
        </div>
    </div>

    <div class="row g-3">
        <!-- Left: details -->
        <div class="col-lg-6">
            <div class="card mb-3">
                <div class="card-body">
                    <h4 class="card-title" th:text="${jobApplication.companyName}">Company Name</h4>
                    <h6 class="card-subtitle mb-2 text-muted" th:text="${jobApplication.position}">Position</h6>

                    <p class="mb-1">
                        <strong>Status:</strong>
                        <span class="badge"
                              th:classappend="${jobApplication.status != null ? jobApplication.status.badgeClass : 'bg-secondary'}"
                              th:text="${jobApplication.status != null ? jobApplication.status.label : 'Unknown'}"></span>
                    </p>

                    <p class="mb-1"><strong>Applied:</strong> <span
                            th:text="${jobApplication.appliedDate}">2025-01-01</span></p>

                    <hr/>

                    <h6>Notes</h6>
                    <p th:text="${jobApplication.notes != null && !#strings.isEmpty(jobApplication.notes) ? jobApplication.notes : '— No notes provided —'}">
                        Notes...
                    </p>
                </div>
            </div>

            <!-- Metadata card -->
            <div class="card">
                <div class="card-body">
                    <h6 class="card-title">Metadata</h6>
                    <ul class="list-unstyled mb-0">
                        <li><strong>ID:</strong> <span th:text="${jobApplication.id}">1</span></li>
                        <li><strong>Company:</strong> <span th:text="${jobApplication.companyName}">Company</span></li>
                        <li><strong>Position:</strong> <span th:text="${jobApplication.position}">Position</span></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Right: image / screenshot -->
        <div class="col-lg-6">
            <div class="card mb-3">
                <div class="card-body">
                    <h5 class="card-title">Advert Screenshot</h5>

                    <div th:if="${jobApplication.advertImageFilename != null}">
                        <a th:href="@{'/uploads/' + ${jobApplication.advertImageFilename}}" target="_blank">
                            <img th:src="@{'/uploads/' + ${jobApplication.advertImageFilename}}"
                                 alt="Advert screenshot"
                                 class="img-fluid img-thumbnail mb-2"
                                 style="max-height: 400px; width: auto; display:block; margin:auto;"/>
                        </a>
                        <div class="d-flex justify-content-between">
                            <small class="text-muted" th:text="${jobApplication.advertImageFilename}">filename.png</small>
                            <a th:href="@{'/uploads/' + ${jobApplication.advertImageFilename}}" download
                               class="btn btn-sm btn-outline-light">Download</a>
                        </div>
                    </div>

                    <div th:if="${jobApplication.advertImageFilename == null}">
                        <div class="border rounded p-4 text-center text-muted" style="min-height:200px">
                            <p class="mb-2">No screenshot uploaded</p>
                            <small class="d-block">You can add a screenshot when editing this application.</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>